flowchart LR
  subgraph Client
    user[User] --> web["Web UI"]
    web --> idb[(IndexedDB (solo mode))]
  end

  subgraph Core["API Core (FastAPI)"]
    core["API Core"]
    core --> worker["Celery Worker"]
    core --> db[(PostgreSQL)]
    core --> redis[(Redis)]
    core --> share["File Share /data/share"]
    core --> exports["Export Storage /data/exports"]
  end

  subgraph Inference
    core --> proxy["Inference Proxy"]
    proxy --> sam3["SAM3 Inference API"]
    proxy --> byom["BYOM Endpoints"]
  end

  web --> core
